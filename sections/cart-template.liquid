{%- capture section_settings -%}
{
  "showShippingEstimator": {% if cart.item_count == 0 %}false{% else %}{{ section.settings.show_shipping_estimator | json }}{% endif %}
}
{%- endcapture -%}
<style>
li.line-item__property, .line-item__price {
  display: none !important;
}
@media screen and (max-width:640px){
  td.line-item__quantity.table__cell--center, td.line-item__line-price.table__cell--right {
    padding: 5px 20px !important;
  }
}
</style>
<section data-section-id="{{ section.id }}" data-section-type="cart" data-section-settings='{{ section_settings }}' data-item-count="{{ cart.item_count }}">
  {%- if cart.item_count == 0 -%}
    <div class="container">
      <div class="empty-state">
        <div class="empty-state__icon">
          {%- render 'icon', icon: 'big-cart' -%}
        </div>

        <p class="empty-state__heading heading h1">{{ 'cart.general.empty' | t }}</p>

        {%- if settings.cart_show_free_shipping_threshold -%}
          {%- assign threshold_in_cents = settings.cart_free_shipping_threshold | times: 100 -%}
          {%- capture remaining_amount -%}
<span class="saso-cart-original-total"><span>{{ cart.total_price | minus: threshold_in_cents | abs | money_without_trailing_zeros }}</span></span>
<span class="saso-cart-total"></span>
{%- endcapture -%}
          <p class="empty-state__description">{{ 'cart.general.free_shipping_remaining_html' | t: remaining_amount: remaining_amount }}</p>
        {%- endif -%}

        <div class="empty-state__button-container">
          <a href="{{ settings.cart_empty_button_link | default: routes.root_url }}" class="empty-state__button button button--primary">{{ 'cart.general.empty_button' | t }}</a>
        </div>
      </div>
    </div>
  {%- else -%}
    <div class="container">
      <header class="page__header page__header--stack">
        <h1 class="page__title heading h1">{{ 'cart.general.title' | t }}</h1>

        {%- if settings.cart_show_free_shipping_threshold -%}
          {%- assign threshold_in_cents = settings.cart_free_shipping_threshold | times: 100 -%}

          {%- if cart.total_price >= threshold_in_cents -%}
            <p class="page__description">{{ 'cart.general.free_shipping' | t }}</p>
          {%- else -%}
            {%- capture remaining_amount -%}
<span class="saso-cart-original-total"><span>{{ cart.total_price | minus: threshold_in_cents | abs | money_without_trailing_zeros }}</span></span>
<span class="saso-cart-total"></span>
{%- endcapture -%}
            <p class="page__description">{{ 'cart.general.free_shipping_remaining_html' | t: remaining_amount: remaining_amount }}</p>
          {%- endif -%}
        {%- endif -%}
      </header>
    </div>

    <div class="cart-wrapper">
      <div class="cart-wrapper__inner">
        <div class="cart-wrapper__inner-inner">
          <div class="container container--flush">
            {%- comment -%}
            --------------------------------------------------------------------------------------
            LINE ITEMS
            --------------------------------------------------------------------------------------
            {%- endcomment -%}

            <div class="card">
              <div class="table-wrapper">
                <table class="line-item-table table table--loose">
                  <thead class="hidden-phone">
                    <tr>
                      <th>{{ 'customer.order.product' | t }}</th>
                      <th class="table__cell--center">{{ 'customer.order.quantity' | t }}</th>
                      <th class="table__cell--right">{{ 'customer.order.total' | t }}</th>
                    </tr>
                  </thead>

                  <tbody>
                    {%- assign gift_wrap_product = all_products[section.settings.gift_wrap_product] -%}

                    {%- for item in cart.items -%}
                      <tr class="line-item line-item--stack">
                        <td class="line-item__product-info">
                          <div class="line-item__product-info-wrapper">
                            <div class="line-item__image-wrapper">
                              {%- comment -%}For vertical images we force to contain them on a square ratio to avoid growing too large{%- endcomment -%}

                              {%- if item.image.aspect_ratio < 1 -%}
                                <div class="aspect-ratio aspect-ratio--square">
                                  <img loading="lazy" width="auto" height="100%" src="{% render 'product-personalizer' ,item:item,pplr: 'item-image', item_image_size:'180x' %}" alt="{{ item.image.alt | escape }}">
                                </div>
                              {%- else -%}
                                <div class="aspect-ratio" style="padding-bottom: {{ 100.0 | divided_by: item.image.aspect_ratio }}%">
                                  <img loading="lazy" width="auto" height="100%" src="{% render 'product-personalizer' ,item:item,pplr: 'item-image', item_image_size:'180x' %}" alt="{{ item.image.alt | escape }}">
                                </div>
                              {%- endif -%}
                            </div>

                            <div class="line-item__meta">
                              {%- if settings.show_vendor and gift_wrap_product.handle != item.product.handle -%}
                                {%- assign vendor_handle = item.product.vendor | handle -%}
                                {%- assign collection_for_vendor = collections[vendor_handle] -%}

                                {%- unless collection_for_vendor.empty? -%}
                                  <a class="line-item__vendor link" href="{{ collection_for_vendor.url }}">{{ item.product.vendor }}</a>
                                  {%- else -%}
                                  <a class="line-item__vendor link" href="{{ item.product.vendor | url_for_vendor }}">{{ item.product.vendor }}</a>
                                {%- endunless -%}
                              {%- endif -%}

                              {% assign visual_title = item.title %}
                              {% if item.title contains "KC_Botc" %}
                                {% assign visual_title = "Kit de Collage Botánica" %}
                              {% endif %}
                              {% if item.title contains "KC_Aete" %}
                                {% assign visual_title = "Kit de Collage Aesthetic" %}
                              {% endif %}
                              {% if item.title contains "KC_Anml" %}
                                {% assign visual_title = "Kit de Collage Animales" %}
                              {% endif %}
                              {% if item.title contains "KC_ArCl" %}
                                {% assign visual_title = "Kit de Collage Arte Clásico" %}
                              {% endif %}
                              {% if item.title contains "KC_ArMo" %}
                                {% assign visual_title = "Kit de Collage Arte Moderno" %}
                              {% endif %}
                              {% if item.title contains "KC_ArUr" %}
                                {% assign visual_title = "Kit de Collage Arte Urbano" %}
                              {% endif %}
                              {% if item.title contains "KC_Azur" %}
                                {% assign visual_title = "Kit de Collage Azul" %}
                              {% endif %}
                              {% if item.title contains "KC_BarG" %}
                                {% assign visual_title = "Kit de Collage Barbie Girl" %}
                              {% endif %}
                              {% if item.title contains "KC_Bask" %}
                                {% assign visual_title = "Kit de Collage Basketball" %}
                              {% endif %}
                              {% if item.title contains "KC_Berd" %}
                                {% assign visual_title = "Kit de Collage Verde" %}
                              {% endif %}
                              {% if item.title contains "KC_BlNe" %}
                                {% assign visual_title = "Kit de Collage Fotografías en Blanco y Negro" %}
                              {% endif %}
                              {% if item.title contains "KC_Bozo" %}
                                {% assign visual_title = "Kit de Collage Boho" %}
                              {% endif %}
                              {% if item.title contains "KC_CiSp" %}
                                {% assign visual_title = "Kit de Collage Celestial / Astral" %}
                              {% endif %}
                              {% if item.title contains "KC_Ciud" %}
                                {% assign visual_title = "Kit de Collage Ciudades" %}
                              {% endif %}
                              {% if item.title contains "KC_Cybe" %}
                                {% assign visual_title = "Kit de Collage Cyberpunk" %}
                              {% endif %}
                              {% if item.title contains "KC_Flrl" %}
                                {% assign visual_title = "Kit de Collage Flores" %}
                              {% endif %}
                              {% if item.title contains "KC_FuAm" %}
                                {% assign visual_title = "Kit de Collage Americano" %}
                              {% endif %}
                              {% if item.title contains "KC_Futb" %}
                                {% assign visual_title = "Kit de Collage Fútbol" %}
                              {% endif %}
                              {% if item.title contains "KC_Gril" %}
                                {% assign visual_title = "Kit de Collage Girly" %}
                              {% endif %}
                              {% if item.title contains "KC_Gmer" %}
                                {% assign visual_title = "Kit de Collage Gamer" %}
                              {% endif %}
                              {% if item.title contains "KC_HiBa" %}
                                {% assign visual_title = "Kit de Collage Hi Barbie" %}
                              {% endif %}
                              {% if item.title contains "KC_Mini" %}
                                {% assign visual_title = "Kit de Collage Minimalismo" %}
                              {% endif %}
                              {% if item.title contains "KC_Mnoe" %}
                                {% assign visual_title = "Kit de Collage Monet" %}
                              {% endif %}
                              {% if item.title contains "KC_Pisj" %}
                                {% assign visual_title = "Kit de Collage Paisajes" %}
                              {% endif %}
                              {% if item.title contains "KC_Plic" %}
                                {% assign visual_title = "Kit de Collage Películas" %}
                              {% endif %}
                              {% if item.title contains "KC_Plnt" %}
                                {% assign visual_title = "Kit de Collage Plantas" %}
                              {% endif %}
                              {% if item.title contains "KC_Plya" %}
                                {% assign visual_title = "Kit de Collage Playa" %}
                              {% endif %}
                              {% if item.title contains "KC_Pstl" %}
                                {% assign visual_title = "Kit de Collage Pastel" %}
                              {% endif %}
                              {% if item.title contains "KC_RoTe" %}
                                {% assign visual_title = "Kit de Collage Rosa / Teal" %}
                              {% endif %}
                              {% if item.title contains "KC_StWa" %}
                                {% assign visual_title = "Kit de Collage Star Wars" %}
                              {% endif %}
                              {% if item.title contains "KC_Tubr" %}
                                {% assign visual_title = "Kit de Collage Tumblr" %}
                              {% endif %}
                                
                      
                              {%- if gift_wrap_product.handle == item.product.handle -%}
                                <span class="line-item__title text--strong">{{ visual_title }}
  <span class="saso-cart-item-discount-notes" data-key="{{item.key}}"></span>
  <span class="saso-cart-item-upsell-notes" data-key="{{item.key}}"></span>
                                  </span>
                              {%- else -%}
                                <a href="{{ item.url }}" class="line-item__title link text--strong">{{ visual_title }}</a>
                                {%- if item.variant.title contains 'crílico' or item.variant.title contains 'luminio' -%}
                                  <p><strong style="display:block;color: #f0297c !important;line-height: 1.2em;font-size: smaller;">Los productos de lujo, como este, pueden demorar hasta 5 días más en ser entregados.</strong></p>
                                {%- endif -%}
                              {%- endif -%}

                              {%- if item.selling_plan_allocation -%}
                                <p class="line-item__plan-allocation">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                              {%- endif -%}

                              {%- unless item.properties == blank -%}
                                <ul class="line-item__property-list" role="list">
                                  {%- for property in item.properties -%}
                                    {%- assign first_character_in_key = property.first | truncate: 1, '' -%}

                                    {%- if property.last == blank or first_character_in_key == '_' -%}
                                      {%- continue -%}
                                    {%- endif -%}

                                    <li class="line-item__property">{{ property.first }}: 
                                      {% if property.last contains 'digitaloceanspaces'%}
                                        <a class="item-properties" href="{{ property.last }}" target="_blank" style="border-bottom: none">
                                             <img loading="lazy" width="auto" height="100%" src="{{property.last}}" style="max-width: 50px;"/>
                                        </a>
                                        {% else %}
                                           {{ property.last }}
										{%- endif -%}
                                  	</li>
									{%- endfor -%}
                                </ul>
                              {%- endunless -%}
                              
                              <div class="line-item__price-list">
                                {%- if item.original_price > item.final_price -%}
                                  {%- if item.final_price == 0 -%}
                                    <span class="line-item__price line-item__price--highlight">{{ 'cart.general.free' | t }}</span>
                                  {%- else -%}
                                    
<span class="saso-cart-item-price" data-key="{{item.key}}"><span class="line-item__price line-item__price--highlight">{{ item.final_price | money }}</span></span>

                                  {%- endif -%}

                                  
<span class="saso-cart-item-price" data-key="{{item.key}}"><span class="line-item__price line-item__price--compare">{{ item.original_price | money }}</span></span>

                                {%- elsif item.variant.compare_at_price > item.variant.price -%}
                                  {%- if item.final_price == 0 -%}
                                    <span class="line-item__price line-item__price--highlight">{{ 'cart.general.free' | t }}</span>
                                  {%- else -%}
                                    
<span class="saso-cart-item-price" data-key="{{item.key}}"><span class="line-item__price line-item__price--highlight">{{ item.final_price | money }}</span></span>

                                  {%- endif -%}

                                  <span class="line-item__price line-item__price--compare">{{ item.variant.compare_at_price | money }}</span>
                                {%- else -%}
                                  {%- if item.final_price == 0 -%}
                                    <span class="line-item__price">{{ 'cart.general.free' | t }}</span>
                                  {%- else -%}
                                    
<span class="saso-cart-item-price" data-key="{{item.key}}"><span class="line-item__price">{{ item.final_price | money }}</span></span>

                                  {%- endif -%}
                                {%- endif -%}
                              </div>

                              {%- if item.unit_price_measurement -%}
                                <div class="line-item__price-info">
                                  <div class="unit-price-measurement">
                                    <span class="unit-price-measurement__price">{{ item.unit_price | money_without_trailing_zeros }}</span>
                                    <span class="unit-price-measurement__separator">/ </span>

                                    {%- if item.unit_price_measurement.reference_value != 1 -%}
                                      <span class="unit-price-measurement__reference-value">{{ item.unit_price_measurement.reference_value }}</span>
                                    {%- endif -%}

                                    <span class="unit-price-measurement__reference-unit">{{ item.unit_price_measurement.reference_unit }}</span>
                                  </div>
                                </div>
                              {%- endif -%}

                              {%- if item.line_level_discount_allocations != blank -%}
                                <ul class="line-item__discount-list" role="list">
                                  {%- for discount_allocation in item.line_level_discount_allocations -%}
                                    <li class="line-item__discount">
                                      {%- render 'icon', icon: 'sale' -%}{{ discount_allocation.discount_application.title }} (-{{ discount_allocation.amount | money }})
                                    </li>
                                  {%- endfor -%}
                                </ul>
                              {%- endif -%}

                              <!--div class="line-item__quantity hidden-tablet-and-up">
                                {%- comment -%}If the product has the tag "__gift", we remove the price{%- endcomment -%}

                                {%- unless item.product.tags contains '__gift' -%}
                                  <div class="quantity-selector">
                                    {%- assign allow_to_add_more = true -%}

                                    {%- if item.variant.inventory_management and item.variant.inventory_policy == 'deny' and item.quantity == item.variant.inventory_quantity -%}
                                      {%- assign allow_to_add_more = false -%}
                                    {%- endif -%}

                                    <button type="button" class="quantity-selector__button" data-action="decrease-quantity" data-href="{{ routes.cart_change_url }}?quantity={{ item.quantity | minus: 1 }}&line={{ forloop.index }}" data-quantity="{{ item.quantity | minus: 1 }}" data-line="{{ forloop.index }}" aria-label="{{ 'cart.items.decrease_quantity' | t }}" title="{{ 'cart.items.decrease_quantity' | t }}">{% render 'icon', icon: 'minus' %}</button>
                                    <input aria-label="{{ 'product.form.quantity' | t }}" class="quantity-selector__value" inputmode="numeric" data-current-value="{{ item.quantity }}" data-line="{{ forloop.index }}" value="{{ item.quantity }}" size="{{ item.quantity | append: '' | size | at_least: 2 }}">
                                    <button type="button" class="quantity-selector__button" data-action="increase-quantity" data-href="{{ routes.cart_change_url }}?quantity={{ item.quantity | plus: 1 }}&line={{ forloop.index }}" data-quantity="{{ item.quantity | plus: 1 }}" data-line="{{ forloop.index }}" {% if allow_to_add_more %}aria-label="{{ 'cart.items.increase_quantity' | t }}" title="{{ 'cart.items.increase_quantity' | t }}"{% else %}disabled="disabled" aria-label="{{ 'cart.items.no_more_stock' | t }}" data-tooltip="{{ 'cart.items.no_more_stock' | t }}" data-tooltip-position="bottom-left"{% endif %}>{% render 'icon', icon: 'plus' %}</button>
                                  </div>
                                {%- else -%}
                                  <span>{{ item.quantity }}</span>
                                {% endunless -%}

                                <a href="{{ routes.cart_change_url }}?quantity=0&line={{ forloop.index }}" data-action="decrease-quantity" data-quantity="0" data-line="{{ forloop.index }}" class="line-item__quantity-remove link">{{ 'cart.items.remove' | t }}</a>
                              </div-->
                            </div>
                          </div>
                        </td>

                        <td class="line-item__quantity table__cell--center">
                          {%- comment -%}If the product has the tag "__gift", we remove the price{%- endcomment -%}

                          {%- unless item.product.tags contains '__gift' -%}
                            <div class="quantity-selector">
                              {%- assign allow_to_add_more = true -%}

                              {%- if item.variant.inventory_management and item.variant.inventory_policy == 'deny' and item.quantity == item.variant.inventory_quantity -%}
                                {%- assign allow_to_add_more = false -%}
                              {%- endif -%}

                              <button type="button" class="quantity-selector__button" data-action="decrease-quantity" data-href="{{ routes.cart_change_url }}?quantity={{ item.quantity | minus: 1 }}&line={{ forloop.index }}" data-quantity="{{ item.quantity | minus: 1 }}" data-line="{{ forloop.index }}" aria-label="{{ 'cart.items.decrease_quantity' | t }}" title="{{ 'cart.items.decrease_quantity' | t }}">{% render 'icon', icon: 'minus' %}</button>
                              <input aria-label="{{ 'product.form.quantity' | t }}" class="quantity-selector__value" inputmode="numeric" data-current-value="{{ item.quantity }}" data-line="{{ forloop.index }}" value="{{ item.quantity }}" size="{{ item.quantity | append: '' | size | at_least: 2 }}">
                              <button type="button" class="quantity-selector__button" data-action="increase-quantity" data-href="{{ routes.cart_change_url }}?quantity={{ item.quantity | plus: 1 }}&line={{ forloop.index }}" data-quantity="{{ item.quantity | plus: 1 }}" data-line="{{ forloop.index }}" {% if allow_to_add_more %}aria-label="{{ 'cart.items.increase_quantity' | t }}" title="{{ 'cart.items.increase_quantity' | t }}"{% else %}disabled="disabled" aria-label="{{ 'cart.items.no_more_stock' | t }}" data-tooltip="{{ 'cart.items.no_more_stock' | t }}" data-tooltip-position="bottom-left"{% endif %}>{% render 'icon', icon: 'plus' %}</button>
                            </div>
                          {%- else -%}
                            <span>{{ item.quantity }}</span>
                          {%- endunless -%}

                          <a href="{{ routes.cart_change_url }}?quantity=0&line={{ forloop.index }}" data-action="decrease-quantity" data-quantity="0" data-line="{{ forloop.index }}" class="line-item__quantity-remove link">{{ 'cart.items.remove' | t }}</a>
                        </td>

                        <td class="line-item__line-price table__cell--right">
                          {%- if item.final_line_price == 0 -%}
                            {{- 'cart.general.free' | t -}}
                          {%- else -%}
                            <span>{% render 'product-personalizer-helper' ,item:item,pplr: 'item-line-price', items: cart.items %}</span>
                          {%- endif -%}
                        </td>
                      </tr>
                    {%- endfor -%}
                  </tbody>
                </table>
              </div>
            </div>
            
            {% include 'settings_theme_instance' %}
			{%- if pbhd_v2.size > 0 -%}
                <style>
                  .cart_banner {
                    margin: 0 auto 30px auto !important;
                  }
                  @media screen and (min-width:1000px){
                    #cart_banner_mobile{
                      display: none !important;
                    }
                    #cart_banner_desktop{
                      display: block !important;
                    }
                  }
                  @media screen and (max-width:999px){
                    #cart_banner_desktop{
                      display: none !important;
                    }
                    #cart_banner_mobile{
                      display: block !important;
                    }
                  }
                </style>
            	<img loading="lazy" width="auto" height="100%" id="cart_banner_desktop" class="cart_banner" src="{{ pbhd_v2 }}" alt="{{ prom_v1 }}">
            	<img loading="lazy" width="auto" height="100%" id="cart_banner_mobile" class="cart_banner" src="{{ pbhm_v2 }}" alt="{{ prom_v1 }}">
            {%- endif -%}

            {%- comment -%}
            --------------------------------------------------------------------------------------
            GIFT WRAP
            --------------------------------------------------------------------------------------
            {%- endcomment -%}

            {%- assign gift_wrap_product = all_products[section.settings.gift_wrap_product] -%}

            {%- unless gift_wrap_product.empty? or gift_wrap_product.available == false -%}
              {%- comment -%}We also have to do another check to make sure the gift wrap product is not already in the cart{%- endcomment -%}

              {%- assign gift_wrap_in_cart = false -%}

              {%- for item in cart.items -%}
                {%- if item.product_id == gift_wrap_product.id -%}
                  {%- assign gift_wrap_in_cart = true -%}
                  {%- break -%}
                {%- endif -%}
              {%- endfor -%}

              {%- unless gift_wrap_in_cart -%}
                <div class="card">
                  <div class="gift-wrap">
                    <div class="gift-wrap__left">
                      <span class="gift-wrap__icon">{% render 'icon', icon: 'bi-gift-wrap' %}</span>

                      <p class="gift-wrap__text">
                        <span class="text--strong">{{ section.settings.gift_wrap_text | escape }}</span>

                        {%- if gift_wrap_product.price == 0 -%}
                          <span>{{ 'cart.general.free' | t }}</span>
                        {%- else -%}
                          {%- capture gift_wrap_product_price -%}<span>{{ gift_wrap_product.price | money }}</span>{%- endcapture -%}
                          <span>{{ 'cart.gift_wrap.price_html' | t: price: gift_wrap_product_price }}</span>
                        {%- endif -%}
                      </p>
                    </div>

                    {%- form 'product', gift_wrap_product, class: 'gift-wrap__form' -%}
                      <input type="hidden" name="quantity" value="1">
                      <input type="hidden" name="id" data-sku="{{ gift_wrap_product.first_available_variant.sku }}" value="{{ gift_wrap_product.first_available_variant.id }}">

                      <button type="submit" class="button button--secondary" data-action="add-to-cart">{{ section.settings.gift_wrap_button | escape }}</button>
                    {%- endform -%}
                  </div>
                </div>
              {%- endunless -%}
            {%- endunless -%}

            {%- comment -%}
            --------------------------------------------------------------------------------------
            SHIPPING ESTIMATOR
            --------------------------------------------------------------------------------------
            {%- endcomment -%}

            {%- if section.settings.show_shipping_estimator -%}
              <div class="card">
                <div class="estimate-shipping">
                  <button type="button" class="estimate-shipping__toggle" data-action="toggle-collapsible" data-collapsible-force-overflow aria-expanded="false" aria-controls="shipping-estimator">
                    <span class="estimate-shipping__icon">{% render 'icon', icon: 'bi-fast-delivery' %}</span>
                    <span class="estimate-shipping__text">{{ 'cart.shipping_estimator.title' | t }}</span>
                    <span class="estimate-shipping__arrow">{% render 'icon', icon: 'arrow-bottom' %}</span>
                  </button>

                  <div id="shipping-estimator" class="estimate-shipping__collapsible collapsible">
                    <div class="shipping-estimator form" role="form">
                      <div class="form__input-row">
                        <div class="form__input-wrapper">
                          <label for="shipping-estimator-country" class="form__label form__label--light">{{ 'cart.shipping_estimator.country' | t }}</label>

                          <div class="select-wrapper select-wrapper--primary">
                            {%- render 'icon', icon: 'arrow-bottom' -%}

                            <select name="country" id="shipping-estimator-country" data-default="{{ customer.default_address.country | default: section.settings.shipping_estimator_default_country }}" required>
                              {{- country_option_tags -}}
                            </select>
                          </div>
                        </div>

                        <div class="form__input-wrapper" style="display: none">
                          <label for="shipping-estimator-province" class="form__label form__label--light">{{ 'cart.shipping_estimator.province' | t }}</label>

                          <div class="select-wrapper select-wrapper--primary">
                            {%- render 'icon', icon: 'arrow-bottom' -%}

                            <select name="province" id="shipping-estimator-province" data-default="{{ customer.default_address.province }}"></select>
                          </div>
                        </div>

                        <div class="form__input-wrapper" style="max-width: 155px">
                          <label for="shipping-estimator-zip" class="form__label form__label--light">{{ 'cart.shipping_estimator.zip_code' | t }}</label>
                          <input type="text" name="zip" id="shipping-estimator-zip" class="form__field form__field--text" value="{{ customer.default.address.zip }}" required>
                        </div>

                        <div class="form__input-wrapper">
                          <button type="button" class="form__submit button button--secondary" data-action="estimate-shipping">{{ 'cart.shipping_estimator.estimate' | t }}</button>
                        </div>
                      </div>

                      <button type="button" class="form__submit button button--secondary hidden-tablet-and-up" data-action="estimate-shipping">{{ 'cart.shipping_estimator.estimate' | t }}</button>

                      <div class="shipping-estimator__results" style="display: none;"></div>
                    </div>
                  </div>
                </div>
              </div>
            {%- endif -%}

            {%- comment -%}
            --------------------------------------------------------------------------------------
            RECAP
            --------------------------------------------------------------------------------------
            {%- endcomment -%}
            
            <!-- upsell starts 🚀 -->
            <style>
            article.product-item.product-item--vertical.upsell {
                position: relative !important;
                width: 100% !important;
                padding: 0 !important;
                margin-bottom: 30px !important;
            }
            
            article.product-item.product-item--vertical.upsell .product-inner {
                display: none !important;
            }
            
            article.product-item.product-item--vertical.upsell form {
                position: relative !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            
            article.product-item.product-item--vertical.upsell form button[type="submit"] {
                padding: 0 !important;
                margin: 0 auto !important;
                display: block !important;
                background: none !important;
            }
            
            article.product-item.product-item--vertical.upsell form button[type="submit"] img.desktop {
                display: block !important;
            }
            
            article.product-item.product-item--vertical.upsell form button[type="submit"] img.mobile {
                display: none !important;
            }
            
            @media screen and (max-width:640px){
                article.product-item.product-item--vertical.upsell {
                    margin-bottom: 18px !important;
                }
                article.product-item.product-item--vertical.upsell form button[type="submit"] img.desktop {
                    display: none !important;
                }
                
                article.product-item.product-item--vertical.upsell form button[type="submit"] img.mobile {
                    display: block !important;
                }
            }
            </style>
            
            {% assign contain_UpsellProducts = false %}
            
             
            {% for item in cart.items %}
              {% if item.product.tags contains 'collages_202304' %}
                {% assign contain_UpsellProducts = true %}
              {% elsif item.product.tags contains 'cart-offer-aug-2023' %}
                {% assign contain_UpsellProducts = true %}
              {% endif %}
            {% endfor %}
             
            {% assign motif = "none" %}
            
            {% unless contain_UpsellProducts %}
            
              {% comment %}
              MOTIFFS DEFINIDOS
              "aesthetic"
              "tumblr"
              "gamers"
              "futbol"
              "star_wars"
              "arte_urbano"
              "basket"
              "playa"
              "arte_moderno"
              "verde"
              "blanco_y_negro"
              "ciudades"
              "celestial"
              "peliculas"
              {% endcomment %}
            
              {% for item in cart.items %}
                {% assign current_item_tags = "" %}
                {% for tag in item.product.tags %}
                  {% assign current_tag = tag | downcase %}
                  {% comment %}
                  {{ "<strong>Tag raw</strong>" }}
                  {{ current_tag }}
                  {{ "<br>" }}
                  {% endcomment %}
                  {% comment %}
                  {{ "<strong>0 Loop Current item tags:</strong>" }}
                  {{ current_item_tags }}
                  {{ "<br>" }}
                  {% endcomment %}
                  {% assign current_item_tags = current_item_tags | append: current_tag %}
                  {% comment %}
                  {{ "<strong>1 Loop Current item tags:</strong>" }}
                  {{ current_item_tags_1 }}
                  {{ "<br>" }}
                  {% endcomment %}
                  {% assign current_item_tags = current_item_tags | append: "," %}
                  {% comment %}
                  {{ "<strong>2 Loop Current item tags:</strong>" }}
                  {{ current_item_tags }}
                  {{ "<br>" }}
                  {% endcomment %}
                {% endfor %}
                {% comment %}
                {{ "<strong>FINAL Current item tags:</strong>" }}
                {{ current_item_tags }}
                {{ "<br>" }}
                {% endcomment %}
                {% assign current_item_tags = current_item_tags | split: ',' %}
                {% if current_item_tags contains '52-futbol-americano' or current_item_tags contains 'cat-52' %}
                  {% assign motif = "americano" %}
                {% endif %}
                {% if current_item_tags contains '5-animales' or current_item_tags contains 'cat-5' %}
                  {% assign motif = "animales" %}
                {% endif %}
                {% if current_item_tags contains '29-cielo-y-espacio' or current_item_tags contains 'celestial' or current_item_tags contains 'cielo' or current_item_tags contains 'cielo y espacio' or current_item_tags contains 'sky and space' or current_item_tags contains 'skies' or current_item_tags contains 'sky' or current_item_tags contains 'outer space' or current_item_tags contains 'stars' or current_item_tags contains 'clouds' or current_item_tags contains 'cloud' %}
                  {% assign motif = "celestial" %}
                {% endif %}
                {% if current_item_tags contains '48-frases' or current_item_tags contains '31-oficina' or current_item_tags contains '11-café' %}
                  {% assign motif = "aesthetic" %}
                {% endif %}
                {% if current_item_tags contains '111-playas-y-mares' or current_item_tags contains '261-playas' or current_item_tags contains 'beaches' or current_item_tags contains 'beaches and seas' or current_item_tags contains 'playas y mares' or current_item_tags contains 'playas' or current_item_tags contains 'playa' %}
                  {% assign motif = "playa" %}
                {% endif %}
                {% if current_item_tags contains '16-basquetbol' or current_item_tags contains 'baloncesto' or current_item_tags contains 'basketball' or current_item_tags contains 'basquetbol' or current_item_tags contains 'nba' or current_item_tags contains 'basket' %}
                  {% assign motif = "basket" %}
                {% endif %}
                {% if current_item_tags contains '51-futbol' or current_item_tags contains 'fútbol' or current_item_tags contains 'soccer' %}
                  {% assign motif = "futbol" %}
                {% endif %}
                {% if current_item_tags contains '55-gamers' or current_item_tags contains 'gamers' or current_item_tags contains 'gamer' %}
                  {% assign motif = "gamers" %}
                {% endif %}
                {% if current_item_tags contains '135-guerra-de-las-galaxias' or current_item_tags contains 'guerra de las galaxias' or current_item_tags contains 'star-wars' or current_item_tags contains 'star wars' or current_item_tags contains 'starwars' %}
                  {% assign motif = "star_wars" %}
                {% endif %}
                {% if current_item_tags contains '44-fashionista' or current_item_tags contains '159-figurativo' or current_item_tags contains 'moda' %}
                  {% assign motif = "tumblr" %}
                {% endif %}
                {% if current_item_tags contains '20-blanco-y-negro' or current_item_tags contains 'blanco y negro' or current_item_tags contains 'en blanco y negro' or current_item_tags contains 'black and white' or current_item_tags contains 'black-and-white' or current_item_tags contains 'blanco-y-negro' or current_item_tags contains '158-fotografia' or current_item_tags contains 'photography' %}
                  {% assign motif = "blanco_y_negro" %}
                {% endif %}
                {% if current_item_tags contains '1-verde' or current_item_tags contains 'verde' or current_item_tags contains '155-naturaleza' or current_item_tags contains '157-animales-y-naturaleza' or current_item_tags contains '121-religion-y-espiritualidad' or current_item_tags contains 'religion' or current_item_tags contains 'espiritualidad' or current_item_tags contains 'spiritual' %}
                  {% assign motif = "verde" %}
                {% endif %}
                {% if current_item_tags contains '10-arte-clasico' or current_item_tags contains 'Arte Clásico' or current_item_tags contains 'Classical Art' or current_item_tags contains '1-abstracto' or current_item_tags contains 'contemporary art' or current_item_tags contains 'pintura abstracta' or current_item_tags contains 'arte contemporaneo' or current_item_tags contains 'abstract art' or current_item_tags contains 'arte moderno' or current_item_tags contains '187-contemporaneo' %}
                  {% assign motif = "arte_moderno" %}
                {% endif %}
                {% if current_item_tags contains '30-ciudades' or current_item_tags contains 'cityscapes' or current_item_tags contains 'cityscape' or current_item_tags contains 'paisajes urbanos' or current_item_tags contains 'paisaje urbano' or current_item_tags contains 'highrises' or current_item_tags contains 'cities' or current_item_tags contains 'word' or current_item_tags contains 'skyscraper' or current_item_tags contains 'rascacielos' %}
                  {% assign motif = "ciudades" %}
                {% endif %}
                {% if current_item_tags contains '286-arte-urbano' or current_item_tags contains 'arte urbano' or current_item_tags contains 'arte callejero' or current_item_tags contains 'urban' or current_item_tags contains 'urbano' or current_item_tags contains 'street art' %}
                  {% assign motif = "arte_urbano" %}
                {% endif %}
                {% if current_item_tags contains '107-peliculas' or current_item_tags contains 'peliculas' or current_item_tags contains 'pelicula' or current_item_tags contains 'movies' or current_item_tags contains 'movie' or current_item_tags contains 'popular movies' or current_item_tags contains 'famous films' or current_item_tags contains 'famous movies' or current_item_tags contains '132-series-de-tv' or current_item_tags contains 'tv shows' or current_item_tags contains 'series de tv' or current_item_tags contains 'series' or current_item_tags contains 'serie' or current_item_tags contains 'TV Shows' %}
                  {% assign motif = "peliculas" %}
                {% endif %}
                {% comment %}
                {{ "<strong>MOTIF</strong>" }}
                {{ motif }}
                {{ "<br>" }}
                {% endcomment %}
              {% endfor %}
            
              {% assign banner_desk = "" %}
              {% assign banner_mobi = "" %}
              {% assign upsell_product = "" %}
              
              {% if motif == "americano" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Futbol_Americano-_Desktop.png?v=1693944744" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Futbol_Americano-_Movil.png?v=1693944744" %}
                  {% assign upsell_product = "upsell-kit-de-collage-americano" %}
              {% elsif motif == "animales" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Animales-_Desktop.png?v=1693944743" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Animales-_Movil.png?v=1693944744" %}
                  {% assign upsell_product = "upsell-kit-de-collage-animales" %}
              {% elsif motif == "aesthetic" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Aesthetic-_Desktop.png?v=1692820863" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Aesthetic-_Movil.png?v=1692820863" %}
                  {% assign upsell_product = "upsell-kit-de-collage-aesthetic" %}
              {% elsif motif == "tumblr" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Tumblr_-_Desktop.png?v=1692827854" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Tumblr_-_Movil.png?v=1692827854" %}
                  {% assign upsell_product = "upsell-kit-de-collage-tumblr" %}
              {% elsif motif == "gamers" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Gamers-_Desktop.png?v=1692828197" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Gamers_-_Movil.png?v=1692828197" %}
                  {% assign upsell_product = "upsell-kit-de-collage-gamers" %}
              {% elsif motif == "futbol" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Futbol-_Desktop.png?v=1692828239" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Futbol-_Movil.png?v=1692828239" %}
                  {% assign upsell_product = "upsell-kit-de-collage-futbol" %}
              {% elsif motif == "star_wars" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Star_Wars_-_Desktop.png?v=1692828273" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Star_Wars_-_Movil.png?v=1692828273" %}
                  {% assign upsell_product = "upsell-kit-de-collage-star-wars" %}
              {% elsif motif == "arte_urbano" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Arte_Urbano_-_Desktop.png?v=1692828300" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Arte_Urbano_-_Movil.png?v=1692828300" %}
                  {% assign upsell_product = "upsell-kit-de-collage-arte-urbano" %}
              {% elsif motif == "basket" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Basketball-_Desktop.png?v=1692828338" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Basketball-_Movil.png?v=1692828338" %}
                  {% assign upsell_product = "upsell-kit-de-collage-basketball" %}
              {% elsif motif == "playa" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Playa-_Desktop.png?v=1692828365" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Playa-_Movil.png?v=1692828364" %}
                  {% assign upsell_product = "upsell-kit-de-collage-playa" %}
              {% elsif motif == "arte_moderno" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Arte_Moderno_-_Desktop.png?v=1692828395" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Arte_Moderno_-_Movil.png?v=1692828395" %}
                  {% assign upsell_product = "upsell-kit-de-collage-arte-moderno" %}
              {% elsif motif == "verde" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Verde_-_Desktop.png?v=1692828422" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Verde_-_Movil.png?v=1692828422" %}
                  {% assign upsell_product = "upsell-kit-de-collage-verde" %}
              {% elsif motif == "blanco_y_negro" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Fotografias_en_blanco_y_negro_-_Desktop.png?v=1692828452" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Fotografias_en_blanco_y_negro_-_Movil.png?v=1692828452" %}
                  {% assign upsell_product = "upsell-kit-de-collage-fotografias-blanco-negro" %}
              {% elsif motif == "ciudades" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Ciudades_-_Desktop.png?v=1692828514" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Ciudades_-_Movil.png?v=1692828514" %}
                  {% assign upsell_product = "upsell-kit-de-collage-ciudades" %}
              {% elsif motif == "celestial" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Celestial-_Desktop.png?v=1692828547" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Celestial-_Movil.png?v=1692828547" %}
                  {% assign upsell_product = "upsell-kit-de-collage-celestial-astra" %}
              {% elsif motif == "peliculas" %}
                  {% assign banner_desk = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Peliculas_-_Desktop.png?v=1692828584" %}
                  {% assign banner_mobi = "https://cdn.shopify.com/s/files/1/0258/6276/6677/files/Banner_Kit_de_Collage_-_Peliculas_-_Movil.png?v=1692828584" %}
                  {% assign upsell_product = "upsell-kit-de-collage-peliculas" %}
              {% endif %}
            
              {% unless motif == "none" %}
                  {% render "banner_upsell", upsell_product: upsell_product, banner_desk: banner_desk, banner_mobi: banner_mobi, show_add_to_cart: true  %}
              {% endunless %}
              
            {% endunless %}
    
            <!-- upsell ends 🚀 -->
            
            <style>
              .saso-cart-offers .saso-cross-sell-popup {
                padding: 0 !important;
                display: block !important;
                position: relative !important;
                width: 100% !important;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container {
                overflow-y: hidden !important;
                padding: 20px;
              }

              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container:not(:nth-child(5)) {
                margin-right: 20px;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container:nth-child(6),
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container:nth-child(7),
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container:nth-child(8) {
                display: none !important;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container {
                min-width: calc((100% - 80px) / 5) !important;
                max-width: calc((100% - 80px) / 5) !important;
                width: calc((100% - 80px) / 5) !important;
                display: inline-block !important;
                padding: 10px !important;
                line-height: 1em;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-image,
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-image a,
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-image a img {
                max-width: 100% !important;
                max-height: 100% !important;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container button.saso-add-to-cart.saso-crosssell-nav {
                position: relative !important;
                padding: 0 10px !important;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-variants-container select {
                border: unset !important;
                font-weight: 600 !important;
                text-align: left;
                padding: 0 !important;
                width: 100% !important;
                -webkit-appearance: none;
                -moz-appearance: none;
                text-indent: 1px;
                text-overflow: '';
                text-align: center !important;
                display: inline-flex !important;
                height: auto !important;
                font-size: 13.7px !important;
              }
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-image a {
                pointer-events: none !important;
              }
              .saso-cross-sell-popup .saso-was-price{
              	display:none !important;
              }
              
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-variants-container,
              .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container .saso-variants-container select {
                display: none !important;
                height: 0 !important;
                width: 0 !important;
              }

              .saso-cross-sell-popup .saso-price {
                display: inline-block !important;
                margin-top: 8px !important;
              }
              
              span.saso-message {
                font-size: 18px !important;
                font-weight: 800;
                color: #00adef;
                display: inline-block !important;
                transform: translateY(20px);
              }
              
              @media screen and (max-width:600px){
                .saso-cross-sell-popup table > tbody > tr {
                  display: inline-flex !important;
                  position: relative !important;
                }
                html body .saso-cart-offers .saso-cross-sell-popup .saso-products-container td.saso-product-container {
                  min-width: 200px !important;
                }
              }
            </style>
            <div class="saso-cart-offers"></div>
            <!-- upsell ends -->

            <form class="cart-recap" method="post" action="{{ routes.cart_url }}" novalidate="novalidate" data-item-count="{{ cart.item_count }}">
              <div class="cart-recap__scroller">
                <div class="card">
                  <div class="card__section">
                    {%- if cart.cart_level_discount_applications != blank -%}
                      {%- for discount_application in cart.cart_level_discount_applications -%}
                        <div class="cart-recap__price-line cart-recap__price-line--highlight text--pull">
                          <span class="cart-recap__price-line-label">{{ discount_application.title }}</span>
                          <span class="cart-recap__price-line-price">-{{ discount_application.total_allocated_amount | money }}</span>
                        </div>
                      {%- endfor -%}
                    {%- endif -%}

                    <div class="cart-recap__price-line text--pull">
                      <span class="cart-recap__price-line-label">{{ 'cart.general.total' | t }}</span>
                      
<span class="saso-cart-original-total"><span class="cart-recap__price-line-price">{{ cart.total_price | money }}</span></span>
<span class="saso-cart-total"></span>

                    </div>

                    {%- comment -%}
                    To calculate the total discount, we take into account the Shopify Script (for Plus merchants), but we also add the compare at price as
                    well as potential automatic discounts at cart level
                    {%- endcomment -%}

                    {%- assign total_discount = 0 -%}

                    {%- for item in cart.items -%}
                      {%- if item.final_line_price < item.original_line_price -%}
                        {%- assign total_discount = total_discount | plus: item.total_discount -%}
                      {%- elsif item.variant.compare_at_price > item.variant.price -%}
                        {%- assign line_discount = item.variant.compare_at_price | minus: item.variant.price | times: item.quantity -%}
                        {%- assign total_discount = total_discount | plus: line_discount -%}
                      {%- endif -%}
                    {%- endfor -%}

                    {%- for discount_application in cart.cart_level_discount_applications -%}
                      {%- assign total_discount = total_discount | plus: discount_application.total_allocated_amount -%}
                    {%- endfor -%}

                    {%- if total_discount > 0 -%}
                      {%- capture amount_saved -%}<span>{{ total_discount | money }}</span>{%- endcapture -%}
                      <span class="cart-recap__amount-saved">{{ 'cart.general.amount_saved_html' | t: amount_saved: amount_saved }}</span>
                    {%- endif -%}

                    {%- if section.settings.enable_order_notes -%}
                      <div class="cart-recap__note" style="margin-bottom:15px;">
                        <button type="button" class="cart-recap__note-button" data-action="toggle-collapsible" data-collapsible-force-overflow aria-controls="order-note" aria-expanded="false">
                          Agrega notas adicionales <!--{{- 'cart.general.note_title' | t -}}-->
                          <span>
                            <span class="cart-recap__note-edit {% if cart.note != blank %}is-visible{% endif %}">{{ 'cart.general.edit_note' | t }}</span>
                            {%- render 'icon', icon: 'arrow-bottom' -%}
                          </span>
                        </button>

                        <div id="order-note" class="collapsible" aria-hidden="true">
                          <div class="cart-recap__note-inner">
                            <textarea name="note" class="form__field form__field--textarea" rows="3" autofocus>{{ cart.note }}</textarea>
                            <button type="button" class="form__submit form__submit--tight button button--secondary" data-action="save-note">{{ 'cart.general.save_note' | t }}</button>
                          </div>
                        </div>
                      </div>
                    {%- endif -%}

                    <!--div class="cart-recap__notices rte">
                      <p>
                        {%- if shop.taxes_included and shop.shipping_policy.body != blank -%}
                          {{ 'cart.general.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
                        {%- elsif shop.taxes_included -%}
                          {{ 'cart.general.taxes_included_but_shipping_at_checkout' | t }}
                        {%- elsif shop.shipping_policy.body != blank -%}
                          {{ 'cart.general.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
                        {%- else -%}
                          {{ 'cart.general.taxes_and_shipping_at_checkout' | t }}
                        {%- endif -%}
                      </p>
                    </div-->

                    <input type="hidden" name="attributes[collection_products_per_page]" value="">
                    <input type="hidden" name="attributes[collection_layout]" value="">
                    <button type="submit" name="checkout" class="cart-recap__checkout button button--primary button--full button--large" data-saso="true">{{ 'cart.general.checkout' | t }}</button>
                  </div>
                </div>

                {%- if section.settings.show_payment_icons -%}
                  <div class="cart-recap__secure-payment">
                    <p class="cart-recap__secure-payment-title">{% render 'icon', icon: 'lock-2' %} {{ 'cart.general.secure_payments' | t }}</p>

                    <div class="cart-recap__secure-payment-list payment-list payment-list--centered">
                     

                        
                        <img loading="lazy" width="auto" height="100%" src="https://cdn.shopify.com/s/files/1/0258/6276/6677/files/motores-de-pago.svg?v=1642264936" style="width:100%;">


                    </div>
                  </div>
                {%- endif -%}
              </div>
            </form>
          </div>

          {%- comment -%}
          --------------------------------------------------------------------------------------
          UPSELL
          --------------------------------------------------------------------------------------
          {%- endcomment -%}

          {%- assign upsell_collection = collections[section.settings.upsell_collection] -%}

          {%- if section.blocks.size > 0 or upsell_collection != empty -%}
            <div class="container">
              {%- if section.blocks.size > 0 -%}
                <div class="section">
                  <header class="section__header">
                    <h2 class="section__title heading h3">{{ section.settings.trust_heading | escape }}</h2>
                  </header>

                  <div class="text-with-icons text-with-icons--boxed">
                    {%- for block in section.blocks -%}
                      <div class="text-with-icons__item" {{ block.shopify_attributes }}>
                        <div class="text-with-icons__icon-wrapper">
                          {%- if block.settings.custom_icon != blank -%}
                            <img loading="lazy" width="auto" height="100%" src="{{ block.settings.custom_icon | img_url: '60x' }}" alt="{{ block.settings.custom_icon.alt | escape }}">
                          {%- else -%}
                            {%- render 'icon', icon: block.settings.icon, stroke_width: 1.5 -%}
                          {%- endif -%}
                        </div>

                        {%- if block.settings.title != blank or block.settings.content != blank -%}
                          <div class="text-with-icons__content-wrapper">
                            {%- if block.settings.title != blank -%}
                              <p class="text-with-icons__title text--strong">{{ block.settings.title | escape }}</p>
                            {%- endif -%}

                            {%- if block.settings.content != blank -%}
                              <div class="text-with-icons__content rte">
                                {{ block.settings.content  }}
                              </div>
                            {%- endif -%}
                          </div>
                        {%- endif -%}
                      </div>
                    {%- endfor -%}
                  </div>
                </div>
              {%- endif -%}

              {%- if upsell_collection != empty -%}
                {%- comment -%}We iterate through all the products, by making sure to remove those that are already in the cart{%- endcomment -%}

                {%- capture upsell_products -%}
                  {%- assign upsell_products_count = 0 -%}

                  {%- for product in upsell_collection.products -%}
                    {%- unless product.available -%}
                      {%- continue -%}
                    {%- endunless -%}

                    {%- assign include_product = true -%}

                    {%- for item in cart.items -%}
                      {%- if item.product_id == product.id -%}
                        {%- assign include_product = false -%}
                        {%- break -%}
                      {%- endif -%}
                    {%- endfor -%}

                    {%- if include_product -%}
                      {%- render 'product-item', product: product, show_add_to_cart: true, grid_classes: '1/3--lap 1/3--desk 1/4--wide' -%}

                      {%- comment -%}Check how much products we have shown and limit{%- endcomment -%}
                      {%- assign upsell_products_count = upsell_products_count | plus: 1 -%}

                      {%- if upsell_products_count >= section.settings.upsell_products_count -%}
                        {%- break -%}
                      {%- endif -%}
                    {%- endif -%}
                  {%- endfor -%}
                {%- endcapture -%}

                {%- if upsell_products != blank -%}
                  {%- capture section_settings -%}
                  {
                    "stackable": false,
                    "layout": "vertical"
                  }
                  {%- endcapture -%}

                  <div class="section" data-section-id="{{ section.id }}-upsell" data-section-type="featured-collection" data-section-settings='{{ section_settings }}'>
                    <header class="section__header">
                      <h2 class="section__title heading h3">{{ section.settings.upsell_heading | escape }}</h2>
                    </header>

                    <div class="scroller">
                      <div class="scroller__inner">
                        <div class="product-list product-list--vertical product-list--scrollable">
                          {{ upsell_products }}
                        </div>
                      </div>
                    </div>
                  </div>

                  {%- comment -%}
                  --------------------------------------------------------------------------------------
                  QUICK VIEW CONTAINER
                  --------------------------------------------------------------------------------------
                  {%- endcomment -%}

                  <div id="modal-quick-view-{{ section.id }}" class="modal" aria-hidden="true">
                    <div class="modal__dialog modal__dialog--stretch" role="dialog">
                      <div class="modal__loader">
                        {%- render 'icon', icon: 'search-loader' -%}
                      </div>

                      <div class="modal__inner"></div>
                    </div>
                  </div>
                {%- endif -%}
              {%- endif -%}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  {%- endif -%}
</section>
<script>
  $(window).load(function(){
    setTimeout(function() {
      $('button.button--primary').removeAttr('data-ocu-checkout');
	}, 1000);
  });
</script>

{% schema %}
{
  "name": "Cart page",
  "max_blocks": 3,
  "settings": [
    {
      "type": "paragraph",
      "content": "Those settings are only applicable when the cart contains at least one product."
    },
    {
      "type": "checkbox",
      "id": "enable_order_notes",
      "label": "Enable order notes",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": true
    },
    {
      "type": "header",
      "content": "Gift wrap"
    },
    {
      "type": "paragraph",
      "content": "Gift wrap needs to be set up as a product. [Read more](https://support.maestrooo.com/article/190-cart-set-up-a-gift-wrap-product)"
    },
    {
      "type": "product",
      "id": "gift_wrap_product",
      "label": "Product"
    },
    {
      "type": "text",
      "id": "gift_wrap_text",
      "label": "Text",
      "default": "Do you want a gift wrap?"
    },
    {
      "type": "text",
      "id": "gift_wrap_button",
      "label": "Button",
      "default": "Add a gift wrap"
    },
    {
      "type": "header",
      "content": "Shipping estimator"
    },
    {
      "type": "checkbox",
      "id": "show_shipping_estimator",
      "label": "Show shipping rates calculator",
      "default": true
    },
    {
      "type": "text",
      "id": "shipping_estimator_default_country",
      "label": "Default country",
      "info": "If the customer is logged in, the country of their shipping address will be used.",
      "default": "United States"
    },
    {
      "type": "text",
      "id": "trust_heading",
      "label": "Heading",
      "default": "Our guarantees"
    },
    {
      "type": "header",
      "content": "Upsell"
    },
    {
      "type": "paragraph",
      "content": "Show additional products to encourage customers to buy more."
    },
    {
      "type": "text",
      "id": "upsell_heading",
      "label": "Heading",
      "default": "Complete your cart"
    },
    {
      "type": "collection",
      "id": "upsell_collection",
      "label": "Collection",
      "info": "Products already in cart or sold out will be hidden."
    },
    {
      "type": "range",
      "id": "upsell_products_count",
      "label": "Products to show",
      "min": 4,
      "max": 12,
      "step": 4,
      "default": 4
    }
  ],
  "blocks": [
    {
      "name": "Trust text",
      "type": "trust",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "bi-add-to-cart",
              "label": "Add to cart",
              "group": "Shop"
            },
            {
              "value": "bi-gift-wrap",
              "label": "Gift wrap",
              "group": "Shop"
            },
            {
              "value": "bi-gift-box",
              "label": "Gift box",
              "group": "Shop"
            },
            {
              "value": "bi-heart",
              "label": "Heart",
              "group": "Shop"
            },
            {
              "value": "bi-ecology",
              "label": "Ecology",
              "group": "Shop"
            },
            {
              "value": "bi-plant",
              "label": "Plant",
              "group": "Shop"
            },
            {
              "value": "bi-shop",
              "label": "Shop",
              "group": "Shop"
            },
            {
              "value": "bi-shop-pin",
              "label": "Shop with pin",
              "group": "Shop"
            },
            {
              "value": "bi-alert",
              "label": "Alert",
              "group": "Communication"
            },
            {
              "value": "bi-chat",
              "label": "Chat",
              "group": "Communication"
            },
            {
              "value": "bi-comment",
              "label": "Comment",
              "group": "Communication"
            },
            {
              "value": "bi-customer-support",
              "label": "Customer support",
              "group": "Communication"
            },
            {
              "value": "bi-email",
              "label": "Email",
              "group": "Communication"
            },
            {
              "value": "bi-network",
              "label": "Network",
              "group": "Communication"
            },
            {
              "value": "bi-newsletter",
              "label": "Newsletter",
              "group": "Communication"
            },
            {
              "value": "bi-love",
              "label": "Love",
              "group": "Communication"
            },
            {
              "value": "bi-phone",
              "label": "Phone",
              "group": "Communication"
            },
            {
              "value": "bi-share",
              "label": "Share",
              "group": "Communication"
            },
            {
              "value": "bi-delivery",
              "label": "Delivery",
              "group": "Delivery"
            },
            {
              "value": "bi-fast-delivery",
              "label": "Fast delivery",
              "group": "Delivery"
            },
            {
              "value": "bi-returns",
              "label": "Returns",
              "group": "Delivery"
            },
            {
              "value": "bi-time",
              "label": "Time",
              "group": "Delivery"
            },
            {
              "value": "bi-secure-payment",
              "label": "Secure payment",
              "group": "Security"
            },
            {
              "value": "bi-mobile-payment",
              "label": "Mobile payment",
              "group": "Security"
            },
            {
              "value": "bi-credit-card",
              "label": "Credit card",
              "group": "Security"
            },
            {
              "value": "bi-shield",
              "label": "Shield",
              "group": "Security"
            }
          ],
          "default": "bi-customer-support"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "Custom icon",
          "info": "60 x 60px .png with transparency recommended"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Your title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Short content about your store</p>"
        }
      ]
    }
  ]
}
{% endschema %}{% render "product-personalizer-helper" ,item:item,pplr: "product-personalizer-script" %}